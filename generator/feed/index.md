service: generator
service_name: K☆50:Генератор
last_modified: 2016-04-20

Фид – структурированный каталог вашего сайта который обновляется вместе с изменением ассортимента вашего сайта и доступен по ссылке.
Хороший фид – основа простой в создании кампании в К50:Генератор. Хороший фид позволит вам сильно сократить время на создание рекламной кампании.

Для работы с К50:Генератор фид является необходимым элементом, так как именно на основе фида сервис создает кампании, объявления и ключевые слова. К50:Генератор работает с двумя видами фидов YML и CSV.

#CSV фид
Это фид, данные в котором передаются в виде таблицы, с разделителем точка-запятая. Одна строка в CSV фиде – это одно товарное предложение.

Пример фида в формате CSV
![Пример CSV фида](/generator/feed/feed.png)

###Требования к CSV фиду

- Табличные данные, разделитель - точка с запятой
- CSV должен быть в формате UTF-8(без BOM) или windows-1251
- Первая строка CSV файла должна содержать в себе заголовки полей
- Обязательные колонки, которые должны присутствовать в файле: id,url. - id должен быть десятичным числом. Все остальные колонки произвольны и могут использоваться в качестве шаблонов объявлений и ключевых слов.
- Входной файл должен быть доступен по URL, заданному в настройках проекта.
- Названия тегов нужно указывать латиницей (английские буквы).

Мы рекомендуем использовать максимальное возможное количество параметров товаров в выгрузке. Это даст менеджеру по рекламе максимальный простор при составлении рекламных объявлений.

Рекомендуемые параметры для добавления в выгрузку (по стандарту Яндекс.Маркет): **Жирным** выделены важные элементы

| Элементы   | Описание  |
|:-----------|:----------|
| **id**         | id товара |
| **url**        | URL-адрес страницы товара. Максимальная длина URL — 512 символов.|
| **price**      | Цена, по которой данный товар можно приобрести. Цена товарного предложения округляется и выводится в зависимости от настроек пользователя. |
| currencyId | Идентификатор валюты товара (RUR, USD, UAH, KZT). Для корректного отображения цены в национальной валюте, необходимо использовать идентификатор (например, UAH) с соответствующим значением цены.  |
| categoryId | Идентификатор категории товара (целое число не более 18 знаков). Товарное предложение может принадлежать только одной категории|
| picture    | Ссылка на картинку соответствующего товарного предложения. Недопустимо давать ссылку на "заглушку", т.е. на картинку где написано "картинка отсутствует" или на логотип магазина. Максимальная длина URL — 512 символов.|
| **typePrefix** | Группа товаров \ категория |
| **vendor**     | Производитель |
| **model**     | Модель |
| **name**      | Наименование товарного предложения |
| store      | Элемент описывает возможность приобрести товар в точке продаж без предварительного заказа по интернету. Если для данного товара предусмотрена такая возможность, используется значение "true". В противном случае — "false".|
| pickup     | Элемент характеризует наличие самовывоза (возможность предварительно заказать товар и забрать его в точке продаж). Если предусмотрен самовывоз данного товара, используется значение "true". В противном случае — "false". |
| **delivery**    | Элемент, обозначающий возможность доставить соответствующий товар. "false" данный товар не может быть доставлен. "true" товар доставляется на условиях, которые указываются в партнерском интерфейсе http://partner.market.yandex.ru на странице "редактирование".|
| description | Описание товарного предложения |
| vendorCode  | Код товара (указывается код производителя) |
| local_delivery_cost | Стоимость доставки данного товара в Своем регионе |
| **available**   | Статус доступности товара — в наличии/на заказ. available="false" — товарное предложение на заказ. Магазин готов осуществить поставку товара на указанных условиях в течение месяца (срок может быть больше для товаров, которые всеми участниками рынка поставляются только на заказ). Те товарные предложения, на которые заказы не принимаются, не должны выгружаться в Яндекс.Маркет. available="true" — товарное предложение в наличии. Магазин готов сразу договариваться с покупателем о доставке товара либо товар имеется в магазине или на складе, где осуществляется выдача товара покупателям. Более точное описание можно посмотреть в Требованиях к рекламным Материалам. | 
| sales_notes    | Элемент используется для отражения информации о минимальной сумме заказа, минимальной партии товара или необходимости предоплаты, а так же для описания акций, скидок и распродаж. Допустимая длина текста в элементе — 50 символов.|
| **manufacturer_warranty**  | Элемент предназначен для отметки товаров, имеющих официальную гарантию производителя. |
| **country_of_origin**  | Элемент предназначен для указания страны производства товара. |
| downloadable | Элемент предназначен для обозначения товара, который можно скачать. |
| adult     | Элемент обязателен для обозначения товара, имеющего отношение к удовлетворению сексуальных потребностей, либо иным образом эксплуатирующего интерес к сексу. |
| age   | Возрастная категория товара. Допустимые значения: 0+, 6+, 12+, 16+, 18+. |
| barcode | Штрих-код товара, указанный производителем. |
| ** param_height; param_color; param_any_params_you_need**  | Это пользовательские характеристики! Их состав зависит от вашей отрасли и от рекомендаций вашего менеджера по рекламе.  Например, ваш менеджер по рекламе может порекомендовать вам выгружать размер скидки по товарам. Назовите, этот параметр, например, param_discount и выгружайте в нём размер скидки на товар.Также хорошей идеей может добавление слова "Новинка!" на рекламные позиции, которые появились на рынке недавно. Если в вашей базе есть дата добавления товара в каталог - вы можете выгружать её в поле (придумайте для поля название), например, param_addition_date. И мы сделаем шаблон таким образом, чтобы для товаров, добавленных меньше месяца назад, в рекламу добавлялось слово "Новинка".По аналогии можно выгружать поле "Хит продаж". Также можно выгружать множество дополнительных параметров для специфических товаров. Например, для автомобильных диском можно выгружать такие параметры как: тип диска, диаметр диска, расстояние между болтами и кол-во болтов.|

**Что делать, если вы не можете сделать поле id?**
Иногда во входных данных нет технической возможности использовать id. В таком случае нужно указать "опорные поля", по которым может однозначно идентифицироваться предложение. Это может быть название модели, url. Полей может быть несколько. В эти поля нужно добавить звёздочку (*) после названия поля. Например, в таблице у вас есть поля "имя" и "фамилия" и вы уверены, что комбинации "имя" + "фамилия" не повторяются. Тогда вы смело можете отмечать их звёздочками. И система будет использовать комбинацию "имя" + "фамилия", чтобы точно идентифицировать каждую строчку. Пример:

`name*;url;price;color*`
`Пушкин;http://example.com/pushkin;1100;black`
`Лермонтов;http://example.com/lermontov;1300;white`

**Как часто нужно обновлять выгрузку?**
Желательно, чтобы файл был не статичен, а "налету" генерировался на основе данных из CRM, при обращении к нему по URL-адресу. Если это невозможно, то можно генерить файл раз в час или раз в день.

##Категорийный фид
Используется для создания объявлений для категорий товаров.

- id - уникальный id-шник строки (опционально, если его нет, требуется использовать * для пометки "опорных" полей);
- cat_id (category_id) - id категории (у каждой категории он свой);
- parent_id - id родительской категории ;

Также приветствуются дополнительные поля с агрегированной информацией (средняя цена, число товаров в наличии и др.)

Если вы хотите работать с товарным фидом для создания категорийных кампаний, то для удобства необходимо привести url-ы к правильному виду.
URL должен состоять из вложенных параметров, например:

`www.site.ru/catalog/categoriya/brand/model`
`www.site.ru/catalog/televizory/samsung/UE85HU8500TXRU`
А не `www.site.ru/televizor-samsung-UE85HU8500TXRU`
Так будет удобнее обрезать ссылку до названия категории.

#Дополнительный CSV фид
Дополнительный CSV источник может быть полезен в случае, если информация не может быть собрана в одном фиде. Например, можно подгружать маржинальность товаров из 1С, а сам YML файл брать с сайта. Также в дополнительном фиде могут содержаться данные о конверсиях и скидках. Данные из основного и дополнительного фидов синхронизируются по ID.

!!! important "Обязательные требования"
	Обязательно id первого товара в дополнительном фиде должен совпадать с id первого оффера в основном фиде!

Дополнительный csv должен иметь структуру:

`id;field1;field2....`
`10;черный;100`
В дальнейшем к товару с ID 10 будут добавлены свойства field1 и field2 со значениями черный и 100, список полей может быть произволен.

!!! important "Обязательные требования"
	Важно! Названия тегов нужно указывать латиницей (английские буквы).

#YML фид
Это подвид XML файла данные в котором передаются вложенными категориями, данный формат поддерживает Яндекс.Маркет. Для проверки корректности YML файла его необходимо загрузить в Яндекс.Маркет (данную проверку можно провести только в случае если у данного клиента есть аккаунт на Яндекс.Маркет). Теги должны следовать в правильном порядке как того требует Яндекс Маркет.

###Требования к YML фиду
Информацию о правилах формирования YML можно посмотреть в [помощи Маркета](https://yandex.ru/support/partnermarket/export/recommendation.xml).
Описание формата выгрузки доступно [здесь](http://partner.market.yandex.ru/legal/tt/)
[Пример YML](https://yandex.st/market-export/1.0-17/partner/help/YML.xml) фида в формате windows-1251. 

Яндекс.Маркет предлагает делать выгрузки:

- с ограниченным набором полей ("Упрощённая" выгрузка)
- с расширенным набором полей (выгрузка "vendor.model")
[Подробнее про типы выгрузки](https://yandex.ru/support/partnermarket/offers.xml)

Мы рекомендуем использовать выгрузку с расширенным набором полей (vendor.model), так как на её основании можно сделать более продвинутую рекламную кампанию.
Чем мельче будет разбито название товара по тегам, тем удобнее будет работать с фидом.

Пример неудачного фида:
![неудачный CSV фид](/generator/feed/feed1.png)

Пример удачного фида:
![удачный CSV фида](/generator/feed/feed2.png)

!!! important "Обязательные требования"
    Параметр id должен быть 32-х битным целым числом и уникальным для каждого товара. ID не должен превышать значение 2 147 483 648 (это наибольшее число, которое вмещает 32-битный знаковый целый тип данных signed int32).

**Выгрузка YML со списком всех товаров**
Такая выгрузка может понадобиться для работы с К☆50:Оптимизатор. В ней должна быть связка id товара + url товара, соответственно мы сможем понять какой именно URL принёс деньги - и, например, на него можем увеличить ставки. Период: все товары, продававшиеся на сайте в течение последнего года, либо за имеющийся период. Эта выгрузка по формату идентична выгрузке для К☆50:Генератор (пример выше), но в неё должны быть включены все товары магазина, продававшиеся за последние несколько месяцев (включая снятые с производства, отсутствующие в наличии и любые другие, которые не выгружаются в стандартный YML).

#Фид с паролем
Чтобы Генератор прочитал запароленный фид, ссылка на фид должна содержать в себе логин и пароль. Формат ссылки выглядит следующим образом:
`http://LOGIN:PASSWORD@feed_url`
протокол может быть *http* или *https*

#Таблица создаваемая в интерфейсе
Для создания объявлений в генераторе используются фиды с данными. 

Если у вас нет возможности подготовить фид, то вы можете добавить таблицу в интерфейсе К50, в которую добавите столбец с ключами, а также другими тегами, которые вам могут понадобиться для генерации объявлений.

Чтобы создать таблицу, вам нужно перейти на вкладку "Таблицы", затем нажать на кнопку "Добавить":
![Добавление таблицы](/generator/feed/feed4.png)

Перед вами появится шаблон таблицы, где первый столбец - это id объявлений (это должны быть уникальные числа), верхняя строчка (названия столбцов) - это названия тегов, которые вы потом будете использовать в шаблонах.
![Изменение таблицы](/generator/feed/feed5.png)

Вы можете сразу в интерфейсе задать нужное количество столбцов и строк для товаров, либо сделать таблицу в exel, а потом скопировать данные из нее в таблицу в аккаунте. При копировании нужное количество строк и столбцов добавится автоматически.

После сохранения таблицы, вы сможете выбрать ее при создании проекта. 
![Использование таблицы](/generator/feed/feed6.png)